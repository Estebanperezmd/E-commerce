<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Test micro carrito</title>
</head>
<body>
  <h1>Test micro carrito</h1>

  <button id="btnPing">Probar GET /ping</button>
  <button id="btnCreate">Probar POST /create</button>

  <pre id="out"></pre>

  <script>
    const BASE = "http://localhost:3007"; // ðŸ‘ˆ MISMO PUERTO QUE EL BACK
    const out = document.getElementById("out");

    async function call(method, path, body = null) {
      out.textContent = `${method} ${BASE}${path}...\n`;
      try {
        const res = await fetch(`${BASE}${path}`, {
          method,
          headers: body ? { "Content-Type": "application/json" } : undefined,
          body: body ? JSON.stringify(body) : undefined,
        });

        const text = await res.text(); // ðŸ‘ˆ leemos texto, no asumimos JSON

        out.textContent =
          `Status: ${res.status}\n` +
          `URL: ${res.url}\n\n` +
          `Body crudo:\n${text}`;
      } catch (err) {
        out.textContent = "Error: " + err.message;
      }
    }

    document.getElementById("btnPing").addEventListener("click", () => {
      call("GET", "/ping");
    });

    // En el testCarrito.html, botÃ³n POST /create:
document.getElementById("btnCreate").addEventListener("click", () => {
  call("POST", "/create", { prueba: true, userId: 4 }); // por ejemplo el id=4 que me mostraste
});

  </script>
</body>
</html>
